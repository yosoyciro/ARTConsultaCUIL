{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SafeAreaProvider = SafeAreaProvider;\nexports.useSafeAreaInsets = useSafeAreaInsets;\nexports.useSafeAreaFrame = useSafeAreaFrame;\nexports.withSafeAreaInsets = withSafeAreaInsets;\nexports.useSafeArea = useSafeArea;\nexports.SafeAreaContext = exports.SafeAreaConsumer = exports.SafeAreaFrameContext = exports.SafeAreaInsetsContext = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _NativeSafeAreaProvider = _interopRequireDefault(require(\"./NativeSafeAreaProvider\"));\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar SafeAreaInsetsContext = React.createContext(null);\nexports.SafeAreaInsetsContext = SafeAreaInsetsContext;\nvar SafeAreaFrameContext = React.createContext(null);\nexports.SafeAreaFrameContext = SafeAreaFrameContext;\n\nfunction SafeAreaProvider(_ref4) {\n  var children = _ref4.children,\n      initialMetrics = _ref4.initialMetrics,\n      initialSafeAreaInsets = _ref4.initialSafeAreaInsets;\n\n  var _ref, _ref2, _initialMetrics$inset, _ref3, _initialMetrics$frame;\n\n  var parentInsets = useParentSafeAreaInsets();\n  var parentFrame = useParentSafeAreaFrame();\n\n  var _React$useState = React.useState((_ref = (_ref2 = (_initialMetrics$inset = initialMetrics === null || initialMetrics === void 0 ? void 0 : initialMetrics.insets) !== null && _initialMetrics$inset !== void 0 ? _initialMetrics$inset : initialSafeAreaInsets) !== null && _ref2 !== void 0 ? _ref2 : parentInsets) !== null && _ref !== void 0 ? _ref : null),\n      _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n      insets = _React$useState2[0],\n      setInsets = _React$useState2[1];\n\n  var _React$useState3 = React.useState((_ref3 = (_initialMetrics$frame = initialMetrics === null || initialMetrics === void 0 ? void 0 : initialMetrics.frame) !== null && _initialMetrics$frame !== void 0 ? _initialMetrics$frame : parentFrame) !== null && _ref3 !== void 0 ? _ref3 : {\n    x: 0,\n    y: 0,\n    width: _reactNative.Dimensions.get('window').width,\n    height: _reactNative.Dimensions.get('window').height\n  }),\n      _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n      frame = _React$useState4[0],\n      setFrame = _React$useState4[1];\n\n  var onInsetsChange = React.useCallback(function (event) {\n    if (event.nativeEvent.frame != null) {\n      setFrame(event.nativeEvent.frame);\n    }\n\n    setInsets(event.nativeEvent.insets);\n  }, []);\n  return React.createElement(_NativeSafeAreaProvider.default, {\n    style: styles.fill,\n    onInsetsChange: onInsetsChange\n  }, insets != null ? React.createElement(SafeAreaFrameContext.Provider, {\n    value: frame\n  }, React.createElement(SafeAreaInsetsContext.Provider, {\n    value: insets\n  }, children)) : null);\n}\n\nvar styles = _reactNative.StyleSheet.create({\n  fill: {\n    flex: 1\n  }\n});\n\nfunction useParentSafeAreaInsets() {\n  return React.useContext(SafeAreaInsetsContext);\n}\n\nfunction useParentSafeAreaFrame() {\n  return React.useContext(SafeAreaFrameContext);\n}\n\nfunction useSafeAreaInsets() {\n  var safeArea = React.useContext(SafeAreaInsetsContext);\n\n  if (safeArea == null) {\n    throw new Error('No safe area insets value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.');\n  }\n\n  return safeArea;\n}\n\nfunction useSafeAreaFrame() {\n  var frame = React.useContext(SafeAreaFrameContext);\n\n  if (frame == null) {\n    throw new Error('No safe area frame value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.');\n  }\n\n  return frame;\n}\n\nfunction withSafeAreaInsets(WrappedComponent) {\n  return function (props) {\n    return React.createElement(SafeAreaConsumer, null, function (insets) {\n      return React.createElement(WrappedComponent, _extends({}, props, {\n        insets: insets\n      }));\n    });\n  };\n}\n\nfunction useSafeArea() {\n  return useSafeAreaInsets();\n}\n\nvar SafeAreaConsumer = SafeAreaInsetsContext.Consumer;\nexports.SafeAreaConsumer = SafeAreaConsumer;\nvar SafeAreaContext = SafeAreaInsetsContext;\nexports.SafeAreaContext = SafeAreaContext;","map":{"version":3,"sources":["SafeAreaContext.tsx"],"names":["SafeAreaInsetsContext","React","SafeAreaFrameContext","initialSafeAreaInsets","parentInsets","useParentSafeAreaInsets","parentFrame","useParentSafeAreaFrame","initialMetrics","x","y","width","Dimensions","height","onInsetsChange","event","setFrame","setInsets","styles","insets","frame","fill","flex","safeArea","props","useSafeAreaInsets","SafeAreaConsumer","SafeAreaContext"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Dimensions } from 'react-native';\nimport NativeSafeAreaProvider from './NativeSafeAreaProvider';\nimport { EdgeInsets, InsetChangedEvent, Metrics, Rect } from './SafeArea.types';\n\nexport const SafeAreaInsetsContext = React.createContext<EdgeInsets | null>(\n  null,\n);\n\nexport const SafeAreaFrameContext = React.createContext<Rect | null>(null);\n\nexport interface SafeAreaViewProps {\n  children?: React.ReactNode;\n  initialMetrics?: Metrics | null;\n  /**\n   * @deprecated\n   */\n  initialSafeAreaInsets?: EdgeInsets | null;\n}\n\nexport function SafeAreaProvider({\n  children,\n  initialMetrics,\n  initialSafeAreaInsets,\n}: SafeAreaViewProps) {\n  const parentInsets = useParentSafeAreaInsets();\n  const parentFrame = useParentSafeAreaFrame();\n  const [insets, setInsets] = React.useState<EdgeInsets | null>(\n    initialMetrics?.insets ?? initialSafeAreaInsets ?? parentInsets ?? null,\n  );\n  const [frame, setFrame] = React.useState<Rect>(\n    initialMetrics?.frame ??\n      parentFrame ?? {\n        // Backwards compat so we render anyway if we don't have frame.\n        x: 0,\n        y: 0,\n        width: Dimensions.get('window').width,\n        height: Dimensions.get('window').height,\n      },\n  );\n  const onInsetsChange = React.useCallback((event: InsetChangedEvent) => {\n    // Backwards compat with old native code that won't send frame.\n    if (event.nativeEvent.frame != null) {\n      setFrame(event.nativeEvent.frame);\n    }\n    setInsets(event.nativeEvent.insets);\n  }, []);\n\n  return (\n    <NativeSafeAreaProvider style={styles.fill} onInsetsChange={onInsetsChange}>\n      {insets != null ? (\n        <SafeAreaFrameContext.Provider value={frame}>\n          <SafeAreaInsetsContext.Provider value={insets}>\n            {children}\n          </SafeAreaInsetsContext.Provider>\n        </SafeAreaFrameContext.Provider>\n      ) : null}\n    </NativeSafeAreaProvider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fill: { flex: 1 },\n});\n\nfunction useParentSafeAreaInsets(): EdgeInsets | null {\n  return React.useContext(SafeAreaInsetsContext);\n}\n\nfunction useParentSafeAreaFrame(): Rect | null {\n  return React.useContext(SafeAreaFrameContext);\n}\n\nexport function useSafeAreaInsets(): EdgeInsets {\n  const safeArea = React.useContext(SafeAreaInsetsContext);\n  if (safeArea == null) {\n    throw new Error(\n      'No safe area insets value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.',\n    );\n  }\n  return safeArea;\n}\n\nexport function useSafeAreaFrame(): Rect {\n  const frame = React.useContext(SafeAreaFrameContext);\n  if (frame == null) {\n    throw new Error(\n      'No safe area frame value available. Make sure you are rendering `<SafeAreaProvider>` at the top of your app.',\n    );\n  }\n  return frame;\n}\n\nexport function withSafeAreaInsets<T>(\n  WrappedComponent: React.ComponentType<T>,\n) {\n  return (props: T) => (\n    <SafeAreaConsumer>\n      {(insets) => <WrappedComponent {...props} insets={insets} />}\n    </SafeAreaConsumer>\n  );\n}\n\n/**\n * @deprecated\n */\nexport function useSafeArea(): EdgeInsets {\n  return useSafeAreaInsets();\n}\n\n/**\n * @deprecated\n */\nexport const SafeAreaConsumer = SafeAreaInsetsContext.Consumer;\n\n/**\n * @deprecated\n */\nexport const SafeAreaContext = SafeAreaInsetsContext;\n"]},"metadata":{},"sourceType":"script"}